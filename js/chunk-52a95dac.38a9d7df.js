(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52a95dac"],{"0424":function(e,t,o){"use strict";var a=o("39ea"),s={methods:{openDialogSuccess:function(e){a["a"].alert({title:"Success!",message:e,confirmText:"OK",hasIcon:!0,icon:"check"})},openDialogError:function(e){a["a"].alert({title:"Error!",message:e,type:"is-danger",hasIcon:!0,icon:"view-dashboard",confirmText:"OK"})}}};t["a"]=s},"05ac":function(e,t,o){},"07da":function(e,t,o){},3e3:function(e,t,o){"use strict";var a=o("05ac"),s=o.n(a);s.a},3037:function(e,t,o){"use strict";o("96cf");var a=o("1da1"),s=o("2b0e"),n=o("2f62"),r=o("de46"),i=o("9664");s["a"].use(n["a"]);var c=new n["a"].Store({state:{school:i["a"].placeholder()},getters:{get:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.school.id!==i["a"].placeholder().id){e.next=3;break}return e.next=3,r["a"].school.getSchool().then((function(e){return t.school=i["a"].fromResponse(e)}));case 3:return e.abrupt("return",t.school);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},mutations:{set:function(e,t){e.school=i["a"].fromResponse(t)},clear:function(e){e.school=i["a"].placeholder()}},actions:{},modules:{}});t["a"]=c},4309:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"modal-card-body"},[o("h3",{staticClass:"title has-text-centered has-text-dark"},[e._v("School creation:")]),o("div",{staticClass:"box"},[o("p",[e._v("Enter your school name:")]),o("b-field",[o("b-input",{attrs:{placeholder:"School name",required:""},model:{value:e.createSchoolForm.schoolName,callback:function(t){e.$set(e.createSchoolForm,"schoolName",t)},expression:"createSchoolForm.schoolName"}})],1),o("p",[e._v("Enter your school address:")]),o("b-field",[o("b-input",{attrs:{placeholder:"School address",required:""},model:{value:e.createSchoolForm.schoolAddress,callback:function(t){e.$set(e.createSchoolForm,"schoolAddress",t)},expression:"createSchoolForm.schoolAddress"}})],1),o("b-button",{attrs:{type:"is-primary",disabled:!(e.isCompleted&&e.clickAllowed),expanded:""},on:{click:e.createSchool}},[e._v("Create school! ")])],1)])},s=[],n=o("de46"),r=o("3037"),i=o("0424"),c={data:function(){return{createSchoolForm:{schoolName:"",schoolAddress:""},clickAllowed:!1}},mixins:[i["a"]],computed:{isCompleted:function(){var e=this.createSchoolForm.schoolName&&this.createSchoolForm.schoolAddress;return e&&(this.clickAllowed=!0),e}},methods:{createSchool:function(){var e=this;this.clickAllowed=!1,n["a"].school.createSchool(this.createSchoolForm).then((function(t){r["a"].commit("set",t),i["a"].methods.openDialogSuccess("School was created!"),e.$router.push("/school")}),(function(e){i["a"].methods.openDialogError("School wasn't created, change your input values.")}))}}},l=c,u=o("2877"),d=Object(u["a"])(l,a,s,!1,null,null,null);t["a"]=d.exports},"51a9":function(e,t,o){"use strict";var a=o("706b"),s=o.n(a);s.a},"6b03":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("authenticated-header"),0===e.profiles.length?o("h6",{staticClass:"title has-text-centered has-text-white"},[e._v("Seems, you don't have active profiles")]):o("h6",{staticClass:"title has-text-centered has-text-white"},[e._v("That's your profiles")]),o("hr"),0===e.profiles.length?o("p",{staticClass:"subtitle has-text-centered has-text-white"},[e._v("Let's do one of the following:")]):e._e(),o("div",{attrs:{id:"main-container"}},[o("div",{staticClass:"card"},[o("nav",{staticClass:"panel"},[0===e.profiles.length?o("div",[o("b-collapse",{staticClass:"card",attrs:{animation:"slide","aria-id":"schoolCreation",open:e.schoolCollapseOpen},on:{"update:open":function(t){e.schoolCollapseOpen=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){return o("div",{staticClass:"card-header",attrs:{role:"tab","aria-controls":"schoolCreation"}},[o("p",{staticClass:"card-header-title"},[e._v(" Create school ")]),o("a",{staticClass:"card-header-icon"},[o("b-icon",{attrs:{icon:t.open?"menu-up":"menu-down"}})],1)])}}],null,!1,2968745134)},[o("div",{staticClass:"card-content"},[o("div",{staticClass:"content"},[o("CreateSchool")],1)])]),o("b-collapse",{staticClass:"card",attrs:{animation:"slide","aria-id":"schoolCreation",open:e.inviteCollapseOpen},on:{"update:open":function(t){e.inviteCollapseOpen=t}},scopedSlots:e._u([{key:"trigger",fn:function(t){return o("div",{staticClass:"card-header",attrs:{role:"button","aria-controls":"schoolCreation"}},[o("p",{staticClass:"card-header-title"},[e._v(" Apply for position ")]),o("a",{staticClass:"card-header-icon"},[o("b-icon",{attrs:{icon:t.open?"menu-up":"menu-down"}})],1)])}}],null,!1,3133478601)},[o("div",{staticClass:"card-content"},[o("div",{staticClass:"content"},[o("InvitationCard")],1)])])],1):e._e(),e.profiles.length>0?o("div",[o("p",{staticClass:"panel-heading"},[e._v("Choose profile from the list:")]),e._l(e.profiles,(function(t){return o("a",{staticClass:"panel-block",on:{click:function(o){return e.chooseProfile(t)}}},[e._m(0,!0),e._v(" "+e._s(t.profileName)+" (created "+e._s(e._f("formatDate")(t.creationDate))+") ")])}))],2):e._e()])])])],1)},s=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",{staticClass:"panel-icon"},[o("i",{staticClass:"fas fa-user",attrs:{"aria-hidden":"true"}})])}],n=(o("96cf"),o("1da1")),r=o("c6e9"),i=o("3037"),c=o("a91c"),l=o("4309"),u=o("a34b"),d={name:"ChooseProfile",components:{AuthenticatedHeader:c["a"],CreateSchool:l["a"],InvitationCard:u["a"]},data:function(){return{profiles:[],schoolCollapseOpen:!1,inviteCollapseOpen:!1}},methods:{chooseProfile:function(e){i["a"].commit("clear"),r["a"].commit("set",e),this.$router.push("/school")}},mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].dispatch("refresh");case 2:return e.next=4,r["a"].getters.getAll;case 4:this.profiles=e.sent;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},h=d,p=(o("3000"),o("2877")),f=Object(p["a"])(h,a,s,!1,null,"be764dbc",null);t["default"]=f.exports},"706b":function(e,t,o){},"7f42":function(e,t,o){"use strict";var a=o("07da"),s=o.n(a);s.a},9664:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var a=o("d4ec"),s=o("bee2"),n=o("4026"),r=function(){function e(t,o,s,n){Object(a["a"])(this,e),this.id=t,this.schoolName=o,this.schoolAddress=s,this.director=n}return Object(s["a"])(e,null,[{key:"placeholder",value:function(){return new e(-1,"","",n["a"].placeholder())}},{key:"fromResponse",value:function(t){return new e(t.id,t.schoolName,t.schoolAddress,n["a"].fromResponse(t.director))}}]),e}()},a34b:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("ValidationObserver",{ref:"formValidator"},[o("section",{staticClass:"modal-card-body"},[o("h3",{staticClass:"title has-text-centered has-text-dark"},[e._v("Complete invitation card:")]),o("div",{staticClass:"box"},[o("p",[e._v("Enter the email of school headmaster:")]),o("b-field",[o("ValidationProvider",{attrs:{rules:"required|email",mode:"passive"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[o("b-input",{attrs:{placeholder:"Headmaster Email",type:"email",required:""},model:{value:e.applyingRequest.directorEmail,callback:function(t){e.$set(e.applyingRequest,"directorEmail",t)},expression:"applyingRequest.directorEmail"}}),o("span",[e._v(e._s(a[0]))])]}}])})],1),o("p",[e._v("Specify the position on which you are applying:")]),o("b-select",{staticClass:"positionList",attrs:{expanded:""},on:{change:e.onChange},model:{value:e.applyingRequest.position,callback:function(t){e.$set(e.applyingRequest,"position",t)},expression:"applyingRequest.position"}},e._l(e.positionList,(function(t){return o("option",{key:t.name},[e._v(e._s(t.name))])})),0),o("b-button",{attrs:{type:"is-primary",expanded:""},on:{click:e.applyMe}},[e._v("Send request ")])],1)])])],1)},s=[],n=o("de46"),r=o("a91c"),i=o("7bb1"),c=(o("c21a"),o("0424")),l={name:"InvitationCard",mixins:[c["a"]],components:{AuthenticatedHeader:r["a"],ValidationProvider:i["b"],ValidationObserver:i["a"]},data:function(){return{applyingRequest:{directorEmail:"",position:""},positionList:[{name:"Teacher"},{name:"HeadTeacher"}]}},methods:{applyMe:function(){var e=this;this.$refs.formValidator.validate().then((function(t){t&&n["a"].school.requestProfile(e.applyingRequest).then((function(t){c["a"].methods.openDialogSuccess("Your invitation request was successfully sent"),e.$router.push("/account")}),(function(e){c["a"].methods.openDialogError("Check correctness of director's email or fill the position")}))}))}}},u=l,d=(o("51a9"),o("2877")),h=Object(d["a"])(u,a,s,!1,null,"51678e46",null);t["a"]=h.exports},a91c:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"nav"}},[o("router-link",{attrs:{to:"/account"}},[e._v("My account")]),o("router-link",{attrs:{to:"/apply-for-position"}},[e._v("Apply for position")]),o("router-link",{attrs:{to:"/choose-profile"}},[e._v("Choose profile")]),o("router-link",{attrs:{to:"/logout"}},[e._v("Logout")])],1)},s=[],n={name:"authenticated-header"},r=n,i=(o("7f42"),o("2877")),c=Object(i["a"])(r,a,s,!1,null,"01e271e9",null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-52a95dac.38a9d7df.js.map