(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-066806de"],{"159b":function(e,t,a){var r=a("da84"),n=a("fdbc"),o=a("17c2"),s=a("9112");for(var i in n){var c=r[i],l=c&&c.prototype;if(l&&l.forEach!==o)try{s(l,"forEach",o)}catch(u){l.forEach=o}}},"172d":function(e,t,a){"use strict";var r=a("c4a8"),n=a.n(r);n.a},"17c2":function(e,t,a){"use strict";var r=a("b727").forEach,n=a("b301");e.exports=n("forEach")?function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach},3037:function(e,t,a){"use strict";a("96cf");var r=a("1da1"),n=a("2b0e"),o=a("2f62"),s=a("de46"),i=a("9664");n["a"].use(o["a"]);var c=new o["a"].Store({state:{school:i["a"].placeholder()},getters:{get:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.school.id!==i["a"].placeholder().id){e.next=3;break}return e.next=3,s["a"].school.getSchool().then((function(e){return t.school=i["a"].fromResponse(e)}));case 3:return e.abrupt("return",t.school);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},mutations:{set:function(e,t){e.school=i["a"].fromResponse(t)},clear:function(e){e.school=i["a"].placeholder()}},actions:{},modules:{}});t["a"]=c},4160:function(e,t,a){"use strict";var r=a("23e7"),n=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"6bee":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a("de46"),n={data:function(){return{school:null,schoolUsers:null}},methods:{createProfile:function(e){return r["a"].school.createProfile(e)}}}},9664:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a("d4ec"),n=a("bee2"),o=a("4026"),s=function(){function e(t,a,n,o){Object(r["a"])(this,e),this.id=t,this.schoolName=a,this.schoolAddress=n,this.director=o}return Object(n["a"])(e,null,[{key:"placeholder",value:function(){return new e(-1,"","",o["a"].placeholder())}},{key:"fromResponse",value:function(t){return new e(t.id,t.schoolName,t.schoolAddress,o["a"].fromResponse(t.director))}}]),e}()},b0c0:function(e,t,a){var r=a("83ab"),n=a("9bf2").f,o=Function.prototype,s=o.toString,i=/^\s*function ([^ (]*)/,c="name";!r||c in o||n(o,c,{configurable:!0,get:function(){try{return s.call(this).match(i)[1]}catch(e){return""}}})},b301:function(e,t,a){"use strict";var r=a("d039");e.exports=function(e,t){var a=[][e];return!a||!r((function(){a.call(null,t||function(){throw 1},1)}))}},b64b:function(e,t,a){var r=a("23e7"),n=a("7b0b"),o=a("df75"),s=a("d039"),i=s((function(){o(1)}));r({target:"Object",stat:!0,forced:i},{keys:function(e){return o(n(e))}})},c4a8:function(e,t,a){},d157:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card"},[e._m(0),a("b-tabs",{staticClass:"block",attrs:{position:"is-centered"}},[a("b-tab-item",{attrs:{label:"Head Teachers"}},[a("profiles-list",{attrs:{columns:e.columns,profiles:e.users.headTeachers,name:"head teacher"}})],1),a("b-tab-item",{attrs:{label:"Teachers"}},[a("profiles-list",{attrs:{columns:e.columns,profiles:e.users.teachers,name:"teacher"}})],1),a("b-tab-item",{attrs:{label:"Students"}},[a("profiles-list",{attrs:{columns:e.columns,profiles:e.users.students,name:"student"}})],1)],1)],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[e._v("Users")])])}],o=(a("4160"),a("d81d"),a("b0c0"),a("b64b"),a("159b"),a("96cf"),a("1da1")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.profiles.length?a("b-table",{attrs:{data:e.profiles,columns:e.columns}}):a("p",{staticClass:"notification"},[e._v("There are no "+e._s(e.name)+"s in this school")]),a("b-modal",{attrs:{active:e.isComponentModalActive,"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":"",width:"400"},on:{"update:active":function(t){e.isComponentModalActive=t}}},[a("create-profile",{attrs:{"current-profiles":e.profiles,role:"HeadTeacher"}})],1),a("footer",{staticClass:"card-footer"},[a("button",{staticClass:"button is-primary is-medium",on:{click:function(t){e.isComponentModalActive=!0}}},[e._v("Create "+e._s(e.name))])])],1)},i=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"modal",staticClass:"modal-card"},[e._m(0),a("section",{staticClass:"modal-card-body"},[a("b-field",[a("b-input",{attrs:{type:"email",placeholder:"E-mail",required:""},model:{value:e.data.createProfilePayload.email,callback:function(t){e.$set(e.data.createProfilePayload,"email",t)},expression:"data.createProfilePayload.email"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:"Role",disabled:""},model:{value:e.data.createProfilePayload.role,callback:function(t){e.$set(e.data.createProfilePayload,"role",t)},expression:"data.createProfilePayload.role"}})],1)],1),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){return e.$parent.close()}}},[e._v("Close")]),a("button",{staticClass:"button is-primary",on:{click:e.submit}},[e._v("Create")])])])},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v("Create user")])])}],u=(a("d3b7"),a("6bee")),d=a("d4ec"),f=function e(){Object(d["a"])(this,e),this.email="",this.role=""},h=a("de46"),m={name:"create-profile",mixins:[u["a"]],data:function(){return{data:{createProfilePayload:new f}}},mounted:function(){this.data.createProfilePayload.role=this.role},methods:{submit:function(){var e=this,t=this.$buefy.loading.open(this.$refs.modal.$el);this.createProfile(this.data.createProfilePayload).then((function(t){h["a"].account.getDetails([""+t.accountId]).then((function(a){t.name=a[0].name,t.email=a[0].email,e.currentProfiles.push(t)})),e.$parent.close()}))["finally"]((function(){return t.close()}))}},props:["role","currentProfiles"]},p=m,b=a("2877"),v=Object(b["a"])(p,c,l,!1,null,"326fd2ac",null),y=v.exports,C={name:"profiles-list",props:["profiles","columns","name"],components:{CreateProfile:y},data:function(){return{isComponentModalActive:!1}},mounted:function(){var e=this;this.profiles.forEach((function(t){t.name||e.$set(t,"name","Not yet created")}))}},P=C,g=(a("172d"),Object(b["a"])(P,s,i,!1,null,"459b799c",null)),L=g.exports,S=(a("3037"),a("bee2")),k=a("4026"),w=function(){function e(t,a,r,n){Object(d["a"])(this,e),this.director=t,this.headTeachers=a,this.teachers=r,this.students=n}return Object(S["a"])(e,null,[{key:"placeholder",value:function(){return new e(k["a"].placeholder(),[],[],[])}}]),e}(),T={name:"school-users",components:{ProfilesList:L},data:function(){return{columns:[{field:"profileId",label:"ID",width:"40",numeric:!0},{field:"name",label:"Name"},{field:"email",label:"E-mail"}],users:w.placeholder()}},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:h["a"].school.getSchoolUsers().then((function(e){t.users=e;var a={};t.users.teachers.map((function(e){return a[e.accountId]=e})),t.users.students.map((function(e){return a[e.accountId]=e})),t.users.headTeachers.map((function(e){return a[e.accountId]=e})),Object.keys(a).length&&h["a"].account.getDetails(Object.keys(a)).then((function(e){e.forEach((function(e){t.$set(a[e.id],"name",e.name),t.$set(a[e.id],"email",e.email)}))}))}));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},_=T,E=Object(b["a"])(_,r,n,!1,null,"7dfa9c28",null);t["default"]=E.exports},d81d:function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").map,o=a("d039"),s=a("1dde"),i=s("map"),c=i&&!o((function(){[].map.call({length:-1,0:1},(function(e){throw e}))}));r({target:"Array",proto:!0,forced:!i||!c},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-066806de.662f6f4a.js.map